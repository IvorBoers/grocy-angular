<h1>Shopping list</h1>
<p>
  <a [routerLink]="'/shopping-list/manage'">Manage shopping lists</a>
</p>
<div>
  <mat-form-field class="shopping-list-select">
    <mat-label>Shopping list</mat-label>
    <mat-select [(value)]="selectedList" (selectionChange)="loadItems()">
      <mat-option *ngFor="let list of lists" [value]="list">{{list.name}}</mat-option>
    </mat-select>
  </mat-form-field>
</div>
<div class="add-container">
  <button mat-raised-button (click)="addItem()" color="primary"><mat-icon>add</mat-icon>Add item</button>
  <button mat-stroked-button (click)="addMissingItems()"><mat-icon>add</mat-icon>Add missing items</button>
  <button mat-stroked-button (click)="loadItems()"><mat-icon>refresh</mat-icon>Refresh</button>
  <div *ngIf="newItem">
    <h2>New item</h2>
    <app-shopping-list-item [item]="newItem" [editable]="true" (saveEvent)="onSaveItem($event)"
                            (cancelEvent)="onCancelNewItem($event)"></app-shopping-list-item>
  </div>

</div>
<div class="selection-actions">
  <button mat-button (click)="selectAll()"><mat-icon>checklist</mat-icon>Select all</button>
  <button mat-button (click)="selectDone()"><mat-icon>rule</mat-icon>Select done</button>
  <button mat-button (click)="deleteSelected()" [disabled]="!anySelected()" color="warn"><mat-icon>delete</mat-icon>Delete selected</button>
</div>
<div class="group-container">
  <p>{{items.length}} items in the list</p>
  <div class="group" *ngFor="let pg of getFilledGroups()">
    <h2>{{pg.name}}</h2>
    <app-shopping-list-item *ngFor="let item of itemsForGroup(pg)" [item]="item" [editable]="false"
                            (deleteEvent)="onDeleteItem($event)" (saveEvent)="onSaveItem($event)"></app-shopping-list-item>
  </div>
</div>

